---
import { getLangFromUrl, languages, useTranslations } from '@/i18n'
import { getRelativeLocaleUrl } from 'astro:i18n'

const activeLang = getLangFromUrl(Astro.url)
const t = useTranslations(activeLang)
---

<select
  data-cy='lang-picker'
  class='bg-transparent border-none'
  aria-label={t('languagePicker.ariaLabel')}
  onchange='window.location.pathname = this.value'
>
  {
    Object.keys(languages).map((lang: string) => (
      <option value={getRelativeLocaleUrl(lang)} selected={lang === activeLang}>
        {lang.toUpperCase()}
      </option>
    ))
  }
</select>
